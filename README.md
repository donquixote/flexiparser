# PHP FlexiParser

This library allows to quickly define custom grammars from modular elements, and use them to parse text.
There are a lot of predefined grammar elements, but you can create new ones as you see fit.


## Warning!

After starting this library, I found this one:  
https://packagist.org/packages/vektah/parser-combinator  
https://github.com/Vektah/parser-combinator

Turns out this really does all that I had planned for this library.
So, I recommend to use Vektah's parser combinator instead.


## Development status

This is currently in a very early preview stage. A lot of classes will probably be renamed, etc.

Some ideas and the initial inspiration come from the Doctrine annotation library.


## Some concepts

### Tokenizer
The library in its current state is designed to work with a tokenizer.
The tokenizer splits the input text into tokens, and then the grammar builds a parse tree.

Currently this is a regex implementation taken from Dotrine Annotation DocLexer. That is, the regular expressions and a few lines of code are taken from there, but the rest is written from ground up.

I have not really put much thought into what alternative tokenizers are needed.

### Token iterator
What was the "Lexer" in Doctrine, is now a "TokenIterator", created form the "TokenList", which is generated by the tokenizer. The token iterator is passed around to all the grammar elements, which can attempt to interpret the tokens and advance the iterator position.

### Whitespace
The tokenizer removes all whitespace between tokens, but it remembers it as a boolean. So the grammar symbols can later ask if two tokens were stuck together in the input, or separated with some space.

### Symbols
There are different symbols for concatenation, logical or, regular expressions, brackets, etc. Most of them can be configured with child tokens.

### Recursion and proxy symbols
Since every symbol has references to the "child" symbols in the grammar, a recursive grammar is only possible with proxy symbols. I still want to find a solution for this.


## Examples
Let's build a basic grammar for HTML/XML! Because we can!
This probably needs a different tokenizer, so this is just a theoretical experiment for now.
(I omit all the "use" statements)

(to be continued)
